<!DOCTYPE html>
<html lang="ru" style="color-scheme: light;">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Система мониторинга экологической обстановки - проект команды Рудирончики">

    <title>Экологический мониторинг | Рудирончики</title>

    <!-- Предзагрузка критических ресурсов -->
    <link rel="preload" href="styles/main.css" as="style">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- Инлайновые критические стили -->
    <style>
        :root{--primary:#1a1a1a;--secondary:#45AEAC;--accent:#B0FAB4;--white:#fff;--gray-100:#f8f9fa;--gray-200:#e9ecef;--gray-300:#dee2e6;--gray-400:#ced4da;--gray-500:#adb5bd;--gray-600:#6c757d;--font-family:'Segoe UI',system-ui,sans-serif;--text-xs:.75rem;--text-sm:.875rem;--text-base:1rem;--text-lg:1.125rem;--text-xl:1.25rem;--text-2xl:1.5rem}
        *{box-sizing:border-box;margin:0;padding:0}
        html{line-height:1.15;-webkit-text-size-adjust:100%;scroll-behavior:smooth}
        body{font-family:var(--font-family);line-height:1.6;background:linear-gradient(180deg,#45AEAC 0%,#45AEAC 180px,#58B7AC 220px,#6BC0AD 280px,#7EC9AE 400px,#91D2AF 600px,#B0FAB4 calc(100% - 80px));min-height:100vh;color:var(--primary)}
        #root{min-height:100vh}
        .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    </style>

    <!-- Основные стили с отложенной загрузкой -->
    <link rel="stylesheet" href="styles/main.css" media="print" onload="this.media='all'">

    <!-- Fallback для старых браузеров -->
    <noscript><link rel="stylesheet" href="styles/main.css"></noscript>
</head>
<body>
    <div id="root" aria-live="polite"></div>

    <!-- Скрипты с атрибутами async/defer -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin="anonymous" defer></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin="anonymous" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" crossorigin="anonymous" defer></script>

    <!-- Утилиты и сервисы -->
    <script src="js/utils/dateUtils.js" defer></script>
    <script src="js/utils/domUtils.js" defer></script>
    <script src="js/services/DataService.js" defer></script>

    <!-- Компоненты -->
    <script src="js/components/Header.js" defer></script>
    <script src="js/components/Footer.js" defer></script>
    <script src="js/components/TeamCarousel.js" defer></script>
    <script src="js/components/ChartContainerChartJS.js" defer></script>

    <!-- Основное приложение - загружается последним -->
    <script src="js/app.js" defer></script>

    <!-- Минимальная JS-логика для скелетона -->
    <script>
        // Минимальный скелетон загрузки
        if ('loading' in HTMLImageElement.prototype) {
            document.querySelectorAll('img[loading="lazy"]').forEach(img => {
                img.loading = 'lazy';
            });
        }

        // Отображение скелетона при медленной загрузке
        setTimeout(() => {
            const root = document.getElementById('root');
            if (root && !root.hasChildNodes()) {
                root.innerHTML = '<div style="padding:2rem;text-align:center"><div style="width:60px;height:60px;border:3px solid #f3f3f3;border-top:3px solid #45AEAC;border-radius:50%;margin:0 auto 1rem;animation:spin 1s linear infinite"></div><p>Загрузка...</p></div>';
            }
        }, 100);
    </script>
</body>
</html>